---
import Layout from '../layouts/Layout.astro';
import { projects } from '../data/projects';

const stageEmoji: Record<string, string> = {
  seeding: '\u{1F331}',
  sprouting: '\u{1F33F}',
  growing: '\u{1F33A}',
  grown: '\u{1F338}',
  harvested: '\u{1F33E}',
};
---

<Layout>
  <main class="relative min-h-screen flex flex-col overflow-hidden">
    <!-- Night overlay (controlled by JS) -->
    <div class="night-overlay" id="nightOverlay"></div>

    <!-- Sky area with clouds -->
    <div class="relative h-[55vh] sm:h-auto sm:flex-1 sm:min-h-[60vh] overflow-hidden" id="skyArea" style="background: linear-gradient(to bottom, var(--sky-color-top), var(--sky-color-bottom));">
      <!-- Stars container (populated by JS at night) -->
      <div id="starsContainer" class="absolute inset-0 pointer-events-none z-[14]"></div>

      <!-- Fireflies container (populated by JS at night) -->
      <div id="firefliesContainer" class="absolute inset-0 pointer-events-none z-[16]"></div>

      <!-- Drifting clouds (generated by JS) -->
      <div class="cloud-track"></div>

      <!-- Distant mountains/hills watercolor -->
      <svg class="absolute bottom-0 left-0 w-full" style="height: 55%;" viewBox="0 0 1200 400" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <filter id="watercolor">
            <feTurbulence type="fractalNoise" baseFrequency="0.04" numOctaves="5" result="noise"/>
            <feDisplacementMap in="SourceGraphic" in2="noise" scale="6"/>
          </filter>
          <filter id="watercolorSoft">
            <feTurbulence type="fractalNoise" baseFrequency="0.03" numOctaves="4" result="noise"/>
            <feDisplacementMap in="SourceGraphic" in2="noise" scale="4"/>
          </filter>
          <filter id="inkLine">
            <feTurbulence type="fractalNoise" baseFrequency="0.05" numOctaves="3" result="noise"/>
            <feDisplacementMap in="SourceGraphic" in2="noise" scale="2"/>
          </filter>
        </defs>

        {/* Far distant hills - very muted */}
        <g filter="url(#watercolorSoft)" opacity="0.25">
          <path d="M 0 280 Q 100 220 200 250 Q 350 200 500 240 Q 650 190 800 230 Q 950 200 1100 220 L 1200 260 L 1200 400 L 0 400 Z" fill="var(--hill-far-color)"/>
        </g>

        {/* Mid hills */}
        <g filter="url(#watercolor)" opacity="0.3">
          <path d="M 0 300 Q 150 260 300 285 Q 450 250 600 275 Q 750 245 900 270 Q 1050 250 1200 280 L 1200 400 L 0 400 Z" fill="var(--hill-mid-color)"/>
        </g>
      </svg>

      <!-- Mid hills layer -->
      <svg class="absolute bottom-0 left-0 w-full" style="height: 55%;" viewBox="0 0 1200 400" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <filter id="watercolor2">
            <feTurbulence type="fractalNoise" baseFrequency="0.04" numOctaves="5" result="noise"/>
            <feDisplacementMap in="SourceGraphic" in2="noise" scale="6"/>
          </filter>
          <filter id="inkLine2">
            <feTurbulence type="fractalNoise" baseFrequency="0.05" numOctaves="3" result="noise"/>
            <feDisplacementMap in="SourceGraphic" in2="noise" scale="2"/>
          </filter>
        </defs>

        {/* Grass ground - layered watercolor washes */}
        <g filter="url(#watercolor2)">
          <path d="M 0 320 Q 200 300 400 315 Q 600 298 800 312 Q 1000 300 1200 318 L 1200 400 L 0 400 Z" fill="#a3b893" opacity="0.6"/>
          <path d="M 0 330 Q 150 318 350 328 Q 550 312 750 325 Q 950 315 1200 330 L 1200 400 L 0 400 Z" fill="#8fa87c" opacity="0.7"/>
          <path d="M 0 345 Q 200 335 400 342 Q 600 332 800 340 Q 1000 334 1200 345 L 1200 400 L 0 400 Z" fill="var(--grass-color)" opacity="0.8"/>
        </g>

        {/* Ground line - ink sketch */}
        <g filter="url(#inkLine2)">
          <path d="M 0 342 Q 100 336 200 340 Q 300 334 400 339 Q 500 333 600 338 Q 700 332 800 337 Q 900 333 1000 338 Q 1100 334 1200 340" stroke="#4a5a3e" stroke-width="1.5" fill="none" opacity="0.4"/>
        </g>
      </svg>

      <!-- The garden illustration -->
      <svg class="absolute bottom-0 left-1/2 -translate-x-1/2 w-[120%] sm:w-full max-w-none sm:max-w-6xl" style="height: 75%;" viewBox="0 0 1000 500" preserveAspectRatio="xMidYMax meet" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <filter id="sketchLine">
            <feTurbulence type="fractalNoise" baseFrequency="0.04" numOctaves="4" result="noise"/>
            <feDisplacementMap in="SourceGraphic" in2="noise" scale="2.5"/>
          </filter>
          <filter id="watercolorFill">
            <feTurbulence type="fractalNoise" baseFrequency="0.035" numOctaves="5" result="noise"/>
            <feDisplacementMap in="SourceGraphic" in2="noise" scale="5"/>
          </filter>
          <filter id="softWash">
            <feGaussianBlur stdDeviation="1.5"/>
          </filter>
        </defs>

        {/* ============================================ */}
        {/* PLANT 1: HotHack -Full Bloom (far left)    */}
        {/* Warm orange/amber sunflower                */}
        {/* ============================================ */}
        <a href={`/projects/${projects[0].slug}`} class="plant-link">
          {/* Invisible hit area */}
          <rect x="75" y="175" width="150" height="290" fill="transparent"/>
          <g class="plant-group">
            {/* Stem -ink line style */}
            <g filter="url(#sketchLine)">
              <path d="M 150 420 Q 145 380 142 340 Q 138 300 144 260 Q 148 230 150 210" stroke="#6b5a3a" stroke-width="3" fill="none" stroke-linecap="round" opacity="0.7"/>
              <path d="M 150 420 Q 147 385 144 345 Q 140 305 146 265 Q 150 235 152 215" stroke="#5a4a2e" stroke-width="1.2" fill="none" stroke-linecap="round" opacity="0.35"/>
            </g>

            {/* Branch lines */}
            <g filter="url(#sketchLine)" opacity="0.5">
              <path d="M 144 350 Q 115 335 95 342" stroke="#6b5a3a" stroke-width="1.8" fill="none" stroke-linecap="round"/>
              <path d="M 142 310 Q 175 292 195 300" stroke="#6b5a3a" stroke-width="1.8" fill="none" stroke-linecap="round"/>
              <path d="M 145 275 Q 118 260 105 268" stroke="#6b5a3a" stroke-width="1.5" fill="none" stroke-linecap="round"/>
              <path d="M 147 245 Q 172 232 182 240" stroke="#6b5a3a" stroke-width="1.5" fill="none" stroke-linecap="round"/>
            </g>

            {/* Leaves -warm olive washes */}
            <g filter="url(#watercolorFill)">
              <path d="M 142 348 Q 100 325 85 342 Q 78 320 100 310 Q 125 303 142 330" fill="#8a9460" opacity="0.5"/>
              <path d="M 140 308 Q 178 285 195 298 Q 200 278 175 270 Q 150 265 140 292" fill="#9da870" opacity="0.45"/>
              <path d="M 144 273 Q 112 255 100 266 Q 96 250 116 244 Q 135 240 144 260" fill="#8a9058" opacity="0.4"/>
              <path d="M 148 243 Q 176 228 185 238 Q 180 224 165 220 Q 150 218 148 234" fill="#a8b47a" opacity="0.4"/>
            </g>

            {/* Leaf vein sketch lines */}
            <g filter="url(#sketchLine)" opacity="0.25">
              <path d="M 140 340 Q 110 325 92 335" stroke="#5a4a2e" stroke-width="0.6" fill="none"/>
              <path d="M 142 300 Q 170 285 188 294" stroke="#5a4a2e" stroke-width="0.6" fill="none"/>
            </g>

            {/* Flower -fiery red/orange sunflower petals */}
            <g filter="url(#watercolorFill)" class="plant-flower">
              <g transform="translate(150, 205)">
                {/* Outer wash petals - fiery red-orange */}
                <ellipse cx="0" cy="-20" rx="11" ry="20" fill="#e63946" opacity="0.4" transform="rotate(0)"/>
                <ellipse cx="0" cy="-20" rx="11" ry="20" fill="#d62828" opacity="0.35" transform="rotate(45)"/>
                <ellipse cx="0" cy="-20" rx="11" ry="20" fill="#e85d04" opacity="0.4" transform="rotate(90)"/>
                <ellipse cx="0" cy="-20" rx="11" ry="20" fill="#e63946" opacity="0.35" transform="rotate(135)"/>
                <ellipse cx="0" cy="-20" rx="11" ry="20" fill="#d62828" opacity="0.4" transform="rotate(180)"/>
                <ellipse cx="0" cy="-20" rx="11" ry="20" fill="#e85d04" opacity="0.35" transform="rotate(225)"/>
                <ellipse cx="0" cy="-20" rx="11" ry="20" fill="#e63946" opacity="0.4" transform="rotate(270)"/>
                <ellipse cx="0" cy="-20" rx="11" ry="20" fill="#d62828" opacity="0.35" transform="rotate(315)"/>
                {/* Inner petals - warm orange accent */}
                <ellipse cx="0" cy="-13" rx="7" ry="14" fill="#f77f00" opacity="0.3" transform="rotate(22)"/>
                <ellipse cx="0" cy="-13" rx="7" ry="14" fill="#e85d04" opacity="0.3" transform="rotate(94)"/>
                <ellipse cx="0" cy="-13" rx="7" ry="14" fill="#f77f00" opacity="0.3" transform="rotate(166)"/>
                <ellipse cx="0" cy="-13" rx="7" ry="14" fill="#e85d04" opacity="0.3" transform="rotate(238)"/>
                <ellipse cx="0" cy="-13" rx="7" ry="14" fill="#f77f00" opacity="0.3" transform="rotate(310)"/>
                {/* Center -dark ember core */}
                <circle cx="0" cy="0" r="8" fill="#6a2c0a" opacity="0.55"/>
                <circle cx="0" cy="0" r="5" fill="#4a1c06" opacity="0.45"/>
                <circle cx="-2" cy="-2" r="1.5" fill="#8a4a2a" opacity="0.3"/>
                <circle cx="2" cy="1" r="1.2" fill="#8a4a2a" opacity="0.3"/>
              </g>
            </g>

            {/* Flower ink outline */}
            <g filter="url(#sketchLine)" opacity="0.3">
              <g transform="translate(150, 205)">
                <circle cx="0" cy="0" r="22" stroke="#8b2500" stroke-width="0.8" fill="none"/>
                <circle cx="0" cy="0" r="8" stroke="#6a2c0a" stroke-width="0.5" fill="none"/>
              </g>
            </g>

            {/* Sway */}
            <animateTransform attributeName="transform" type="rotate" values="-2 150 420;2 150 420;-2 150 420" dur="4s" repeatCount="indefinite"/>
          </g>

          {/* Label */}
          <text x="150" y="455" text-anchor="middle" fill="#5a5045" font-size="18" font-weight="600" font-family="'Caveat', cursive" class="plant-label" opacity="0.8">HotHack</text>
        </a>

        {/* ============================================ */}
        {/* PLANT 2: Techmas -Full Bloom               */}
        {/* Christmas red & green theme                */}
        {/* ============================================ */}
        <a href={`/projects/${projects[1].slug}`} class="plant-link">
          {/* Invisible hit area */}
          <rect x="325" y="175" width="155" height="290" fill="transparent"/>
          <g class="plant-group">
            {/* Stem -deep green */}
            <g filter="url(#sketchLine)">
              <path d="M 400 420 Q 396 380 394 340 Q 390 300 396 260 Q 400 230 402 210" stroke="#2d5a3d" stroke-width="3" fill="none" stroke-linecap="round" opacity="0.7"/>
              <path d="M 401 420 Q 398 382 396 345 Q 392 305 398 265 Q 402 235 404 215" stroke="#1e4a2e" stroke-width="1.2" fill="none" stroke-linecap="round" opacity="0.35"/>
            </g>

            {/* Branch lines */}
            <g filter="url(#sketchLine)" opacity="0.5">
              <path d="M 395 350 Q 365 335 348 342" stroke="#2d5a3d" stroke-width="1.8" fill="none" stroke-linecap="round"/>
              <path d="M 394 310 Q 428 292 445 300" stroke="#2d5a3d" stroke-width="1.8" fill="none" stroke-linecap="round"/>
              <path d="M 397 275 Q 370 260 358 268" stroke="#2d5a3d" stroke-width="1.5" fill="none" stroke-linecap="round"/>
              <path d="M 400 245 Q 424 232 434 240" stroke="#2d5a3d" stroke-width="1.5" fill="none" stroke-linecap="round"/>
            </g>

            {/* Leaves -Christmas green */}
            <g filter="url(#watercolorFill)">
              <path d="M 394 348 Q 352 325 338 342 Q 330 320 355 310 Q 378 305 394 330" fill="#228b22" opacity="0.5"/>
              <path d="M 396 308 Q 432 285 448 298 Q 454 278 430 270 Q 406 265 396 292" fill="#2e8b57" opacity="0.45"/>
              <path d="M 396 273 Q 364 255 352 266 Q 348 250 368 244 Q 388 240 396 260" fill="#228b22" opacity="0.4"/>
              <path d="M 400 243 Q 428 228 438 238 Q 432 224 418 220 Q 402 218 400 234" fill="#3cb371" opacity="0.4"/>
            </g>

            {/* Leaf vein sketch lines */}
            <g filter="url(#sketchLine)" opacity="0.25">
              <path d="M 392 340 Q 362 325 345 335" stroke="#1e4a2e" stroke-width="0.6" fill="none"/>
              <path d="M 394 300 Q 422 285 440 294" stroke="#1e4a2e" stroke-width="0.6" fill="none"/>
            </g>

            {/* Flower -Christmas red & green poinsettia style */}
            <g filter="url(#watercolorFill)" class="plant-flower">
              <g transform="translate(402, 205)">
                {/* Outer petals - alternating Christmas red and green */}
                <ellipse cx="0" cy="-20" rx="11" ry="20" fill="#c41e3a" opacity="0.4" transform="rotate(0)"/>
                <ellipse cx="0" cy="-20" rx="11" ry="20" fill="#228b22" opacity="0.35" transform="rotate(45)"/>
                <ellipse cx="0" cy="-20" rx="11" ry="20" fill="#d63447" opacity="0.4" transform="rotate(90)"/>
                <ellipse cx="0" cy="-20" rx="11" ry="20" fill="#2e8b57" opacity="0.35" transform="rotate(135)"/>
                <ellipse cx="0" cy="-20" rx="11" ry="20" fill="#c41e3a" opacity="0.4" transform="rotate(180)"/>
                <ellipse cx="0" cy="-20" rx="11" ry="20" fill="#228b22" opacity="0.35" transform="rotate(225)"/>
                <ellipse cx="0" cy="-20" rx="11" ry="20" fill="#d63447" opacity="0.4" transform="rotate(270)"/>
                <ellipse cx="0" cy="-20" rx="11" ry="20" fill="#2e8b57" opacity="0.35" transform="rotate(315)"/>
                {/* Inner petals - lighter red and green */}
                <ellipse cx="0" cy="-13" rx="7" ry="14" fill="#e85a6b" opacity="0.3" transform="rotate(22)"/>
                <ellipse cx="0" cy="-13" rx="7" ry="14" fill="#5cb85c" opacity="0.3" transform="rotate(94)"/>
                <ellipse cx="0" cy="-13" rx="7" ry="14" fill="#e85a6b" opacity="0.3" transform="rotate(166)"/>
                <ellipse cx="0" cy="-13" rx="7" ry="14" fill="#5cb85c" opacity="0.3" transform="rotate(238)"/>
                <ellipse cx="0" cy="-13" rx="7" ry="14" fill="#e85a6b" opacity="0.3" transform="rotate(310)"/>
                {/* Center -gold/yellow like Christmas ornament */}
                <circle cx="0" cy="0" r="8" fill="#daa520" opacity="0.55"/>
                <circle cx="0" cy="0" r="5" fill="#ffd700" opacity="0.45"/>
                <circle cx="-2" cy="-2" r="1.5" fill="#ffe55c" opacity="0.3"/>
                <circle cx="2" cy="1" r="1.2" fill="#ffe55c" opacity="0.3"/>
              </g>
            </g>

            {/* Flower ink outline */}
            <g filter="url(#sketchLine)" opacity="0.3">
              <g transform="translate(402, 205)">
                <circle cx="0" cy="0" r="22" stroke="#8b0000" stroke-width="0.8" fill="none"/>
                <circle cx="0" cy="0" r="8" stroke="#daa520" stroke-width="0.5" fill="none"/>
              </g>
            </g>

            <animateTransform attributeName="transform" type="rotate" values="-2 400 420;2 400 420;-2 400 420" dur="4.5s" repeatCount="indefinite"/>
          </g>

          <text x="400" y="455" text-anchor="middle" fill="#5a5045" font-size="18" font-weight="600" font-family="'Caveat', cursive" class="plant-label" opacity="0.8">Techmas</text>
        </a>

        {/* ============================================ */}
        {/* PLANT 3: Rubyhash -Sprouting                */}
        {/* Deep ruby red gem tones                     */}
        {/* ============================================ */}
        <a href={`/projects/${projects[2].slug}`} class="plant-link">
          {/* Invisible hit area */}
          <rect x="590" y="290" width="100" height="175" fill="transparent"/>
          <g class="plant-group">
            {/* Stem -warm reddish brown */}
            <g filter="url(#sketchLine)">
              <path d="M 640 420 Q 637 395 635 375 Q 633 355 638 335" stroke="#6b4a4a" stroke-width="2" fill="none" stroke-linecap="round" opacity="0.6"/>
              <path d="M 641 420 Q 639 397 637 378 Q 635 358 640 338" stroke="#5a3a3e" stroke-width="0.8" fill="none" stroke-linecap="round" opacity="0.25"/>
            </g>

            {/* Small leaves -deep green with red tint */}
            <g filter="url(#watercolorFill)">
              <path d="M 635 378 Q 612 365 605 372 Q 612 358 635 368" fill="#7a8a5a" opacity="0.4"/>
              <path d="M 637 355 Q 658 343 665 350 Q 658 336 637 346" fill="#8a7a68" opacity="0.38"/>
            </g>

            {/* Bud tip -ruby red */}
            <g filter="url(#watercolorFill)" class="plant-flower">
              <path d="M 638 335 Q 631 318 638 302 Q 645 318 638 335" fill="#aa3a4a" opacity="0.4"/>
              <path d="M 638 332 Q 634 322 638 312 Q 642 322 638 332" fill="#cc4a5a" opacity="0.3"/>
              {/* Ruby gem glint */}
              <circle cx="637" cy="316" r="1.5" fill="#e8a0a8" opacity="0.35"/>
            </g>

            {/* Leaf sketch lines */}
            <g filter="url(#sketchLine)" opacity="0.2">
              <path d="M 633 372 Q 616 365 608 370" stroke="#5a3a3e" stroke-width="0.5" fill="none"/>
              <path d="M 639 350 Q 654 343 662 348" stroke="#5a3a3e" stroke-width="0.5" fill="none"/>
            </g>

            <animateTransform attributeName="transform" type="rotate" values="-1.5 640 420;1.5 640 420;-1.5 640 420" dur="5s" repeatCount="indefinite"/>
          </g>

          <text x="640" y="455" text-anchor="middle" fill="#5a5045" font-size="18" font-weight="600" font-family="'Caveat', cursive" class="plant-label" opacity="0.8">Rubyhash</text>
        </a>

        {/* ============================================ */}
        {/* PLANT 4: Pokepath -Seeding                  */}
        {/* Golden yellow/electric theme                */}
        {/* ============================================ */}
        <a href={`/projects/${projects[3].slug}`} class="plant-link">
          {/* Invisible hit area */}
          <rect x="810" y="340" width="80" height="140" fill="transparent"/>
          <g class="plant-group">
            {/* Stem */}
            <g filter="url(#sketchLine)">
              <path d="M 850 420 Q 848 400 850 375" stroke="#6b5a3a" stroke-width="2" fill="none" stroke-linecap="round" opacity="0.6"/>
              <path d="M 851 420 Q 849 402 851 378" stroke="#5a4a2e" stroke-width="0.8" fill="none" stroke-linecap="round" opacity="0.25"/>
            </g>

            {/* Small leaves */}
            <g filter="url(#watercolorFill)">
              <path d="M 849 400 Q 833 392 828 398 Q 835 386 849 394" fill="#8a9460" opacity="0.45"/>
              <path d="M 851 388 Q 865 380 870 386 Q 863 374 851 382" fill="#9da870" opacity="0.4"/>
            </g>

            {/* Small flower - golden yellow, 5 petals */}
            <g filter="url(#watercolorFill)" class="plant-flower">
              <g transform="translate(850, 370)">
                <ellipse cx="0" cy="-8" rx="5" ry="10" fill="#e8c040" opacity="0.4" transform="rotate(0)"/>
                <ellipse cx="0" cy="-8" rx="5" ry="10" fill="#d4a830" opacity="0.35" transform="rotate(72)"/>
                <ellipse cx="0" cy="-8" rx="5" ry="10" fill="#e8c040" opacity="0.4" transform="rotate(144)"/>
                <ellipse cx="0" cy="-8" rx="5" ry="10" fill="#d4a830" opacity="0.35" transform="rotate(216)"/>
                <ellipse cx="0" cy="-8" rx="5" ry="10" fill="#e8c040" opacity="0.4" transform="rotate(288)"/>
                {/* Center */}
                <circle cx="0" cy="0" r="4" fill="#b8862a" opacity="0.5"/>
                <circle cx="0" cy="0" r="2.5" fill="#a07020" opacity="0.4"/>
                <circle cx="-1" cy="-1" r="0.8" fill="#d4b060" opacity="0.3"/>
              </g>
            </g>

            {/* Flower ink outline */}
            <g filter="url(#sketchLine)" opacity="0.25">
              <g transform="translate(850, 370)">
                <circle cx="0" cy="0" r="12" stroke="#8a6a20" stroke-width="0.6" fill="none"/>
                <circle cx="0" cy="0" r="4" stroke="#8a6a20" stroke-width="0.4" fill="none"/>
              </g>
            </g>

            {/* Electric sparkles */}
            <g opacity="0.4">
              <circle cx="838" cy="365" r="1.2" fill="#e8c840">
                <animate attributeName="opacity" values="0.4;0.1;0.5;0.2;0.4" dur="2s" repeatCount="indefinite"/>
              </circle>
              <circle cx="864" cy="362" r="1" fill="#d4b030">
                <animate attributeName="opacity" values="0.2;0.5;0.1;0.4;0.2" dur="2.5s" repeatCount="indefinite"/>
              </circle>
              <circle cx="846" cy="358" r="0.8" fill="#f0d850">
                <animate attributeName="opacity" values="0.3;0.5;0.15;0.45;0.3" dur="1.8s" repeatCount="indefinite"/>
              </circle>
            </g>

            <animateTransform attributeName="transform" type="rotate" values="-1 850 420;1 850 420;-1 850 420" dur="5.5s" repeatCount="indefinite"/>
          </g>

          <text x="850" y="455" text-anchor="middle" fill="#5a5045" font-size="16" font-weight="600" font-family="'Caveat', cursive" class="plant-label" opacity="0.8">Pokepath</text>
          <text x="850" y="472" text-anchor="middle" fill="#5a5045" font-size="16" font-weight="600" font-family="'Caveat', cursive" class="plant-label" opacity="0.8">Item Injector</text>
        </a>

        {/* Scattered grass/weed sketches between plants */}
        <g filter="url(#sketchLine)" opacity="0.3">
          <path d="M 270 418 Q 272 402 274 418" stroke="#7a9668" stroke-width="1.2" fill="none"/>
          <path d="M 275 418 Q 280 398 283 418" stroke="#6a8658" stroke-width="1" fill="none"/>
          <path d="M 520 416 Q 523 400 526 416" stroke="#7a9668" stroke-width="1.2" fill="none"/>
          <path d="M 525 416 Q 530 395 533 416" stroke="#6a8658" stroke-width="1.2" fill="none"/>
          <path d="M 528 416 Q 526 402 524 416" stroke="#8a9a7c" stroke-width="0.8" fill="none"/>
          <path d="M 740 419 Q 743 404 746 419" stroke="#7a9668" stroke-width="1" fill="none"/>
          <path d="M 745 419 Q 750 400 753 419" stroke="#6a8658" stroke-width="1" fill="none"/>
          <path d="M 60 422 Q 63 408 66 422" stroke="#7a9668" stroke-width="1" fill="none"/>
          <path d="M 950 421 Q 953 406 956 421" stroke="#7a9668" stroke-width="1" fill="none"/>
        </g>

        {/* Tiny wildflower sketches */}
        <g filter="url(#sketchLine)" opacity="0.25">
          <circle cx="280" cy="416" r="2.5" fill="#c4727a" opacity="0.3"/>
          <circle cx="280" cy="416" r="1" fill="#d4c47a" opacity="0.3"/>
          <path d="M 280 419 L 280 426" stroke="#6a8658" stroke-width="0.8"/>
          <circle cx="530" cy="414" r="2" fill="#8a8ab8" opacity="0.3"/>
          <circle cx="530" cy="414" r="0.8" fill="#d4c47a" opacity="0.3"/>
          <path d="M 530 416 L 530 424" stroke="#6a8658" stroke-width="0.8"/>
          <circle cx="745" cy="417" r="2" fill="#c4a872" opacity="0.3"/>
          <circle cx="745" cy="417" r="0.8" fill="#d4c47a" opacity="0.3"/>
          <path d="M 745 419 L 745 426" stroke="#6a8658" stroke-width="0.8"/>
        </g>
      </svg>

      <!-- Theme toggle (top right) -->
      <button class="theme-toggle theme-toggle-fixed" aria-label="Toggle day/night mode">
        <svg class="theme-icon theme-icon-sun" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
        <svg class="theme-icon theme-icon-moon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
      </button>

      <!-- Bio overlay -->
      <div class="absolute top-4 left-4 sm:top-8 sm:left-8 md:left-16 z-10 max-w-[80%] sm:max-w-sm">
        <h1 class="text-3xl sm:text-4xl md:text-5xl font-light leading-tight" style="font-family: 'DM Serif Display', serif; color: var(--text-color);">
          Lachlan Young
        </h1>
        <p class="mt-1 sm:mt-2 text-base sm:text-lg" style="font-family: 'Caveat', cursive; line-height: 1.4; color: var(--text-color); opacity: 0.75;">
          Full-Stack Developer.
        </p>
        <p class="mt-1 text-base sm:text-lg" style="font-family: 'Caveat', cursive; line-height: 1.4; color: var(--text-color); opacity: 0.65;">
          Writing: GraphQL / Rails / React / ReactNative.<br/>
          Throwing myself headfirst into any problem I can find.
        </p>
        <ul class="mt-1 sm:mt-2 text-sm sm:text-base" style="font-family: 'Caveat', cursive; line-height: 1.5; color: var(--text-color); opacity: 0.55; list-style: none; padding: 0; margin: 0;">
          <li>&#8226; Founder of HotHack &amp; Techmas</li>
          <li>&#8226; Mentor @ SheCodes</li>
          <li>&#8226; Co-organizer ReactBris</li>
        </ul>
        <div class="mt-1 sm:mt-2 flex items-center gap-1.5" style="font-family: 'Inter', sans-serif; font-size: 0.75rem; color: var(--text-color); opacity: 0.5;">
          <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
          <span>Brisbane, Australia</span>
        </div>
        <div class="mt-2 sm:mt-3 flex gap-4">
          <a href="https://github.com/builtbyproxy" target="_blank" rel="noopener noreferrer" aria-label="GitHub" class="bio-social-link p-1.5" style="color: var(--text-color); opacity: 0.6; transition: opacity 0.2s ease;">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
          </a>
          <a href="https://linkedin.com/in/builtbyproxy" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn" class="bio-social-link p-1.5" style="color: var(--text-color); opacity: 0.6; transition: opacity 0.2s ease;">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/></svg>
          </a>
          <a href="https://x.com/builtbyproxy" target="_blank" rel="noopener noreferrer" aria-label="X / Twitter" class="bio-social-link p-1.5" style="color: var(--text-color); opacity: 0.6; transition: opacity 0.2s ease;">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
          </a>
        </div>
      </div>
    </div>

    <!-- Mobile project list -->
    <section class="sm:hidden relative z-10 px-5 py-5 flex flex-col gap-2.5" style="background-color: var(--body-bg);">
      {projects.map((project) => (
        <a href={`/projects/${project.slug}`} class="mobile-project-card flex items-center gap-3 p-3.5 rounded-lg" style={`background: var(--surface-bg-solid); border: 1px solid var(--surface-border); text-decoration: none;`}>
          <span class="text-xl flex-shrink-0">{stageEmoji[project.stage]}</span>
          <div class="flex-1 min-w-0">
            <div style="font-family: 'DM Serif Display', serif; color: var(--text-color); font-size: 1rem;">{project.name}</div>
            <div class="mt-0.5" style="font-family: 'Caveat', cursive; font-size: 0.85rem; line-height: 1.3; color: var(--text-muted);">{project.description}</div>
          </div>
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--text-muted); flex-shrink: 0; opacity: 0.5;"><polyline points="9 6 15 12 9 18"/></svg>
        </a>
      ))}
    </section>
  </main>

  <script>
    // ===========================
    // Night elements (always created; CSS controls visibility)
    // ===========================
    const starsContainer = document.getElementById('starsContainer');
    const firefliesContainer = document.getElementById('firefliesContainer');

    if (starsContainer) {
      for (let i = 0; i < 60; i++) {
        const star = document.createElement('div');
        star.className = 'star';
        star.style.left = `${Math.random() * 100}%`;
        star.style.top = `${Math.random() * 50}%`;
        star.style.animationDelay = `${Math.random() * 5}s`;
        star.style.animationDuration = `${2 + Math.random() * 4}s`;
        starsContainer.appendChild(star);
      }
    }
    if (firefliesContainer) {
      for (let i = 0; i < 12; i++) {
        const firefly = document.createElement('div');
        firefly.className = 'firefly';
        firefly.style.left = `${10 + Math.random() * 80}%`;
        firefly.style.top = `${40 + Math.random() * 50}%`;
        firefly.style.animationDelay = `${Math.random() * 6}s`;
        firefly.style.animationDuration = `${4 + Math.random() * 5}s`;
        firefliesContainer.appendChild(firefly);
      }
    }

    // ===========================
    // Plausible custom events
    // ===========================
    const plausible = (window as any).plausible;
    const hour = new Date().getHours();
    const periods = ['night', 'night', 'night', 'night', 'night', 'night', 'sunrise', 'sunrise', 'sunrise', 'day', 'day', 'day', 'day', 'day', 'day', 'day', 'day', 'golden-hour', 'golden-hour', 'golden-hour', 'night', 'night', 'night', 'night'];
    plausible?.('pageview', { props: { 'time-of-day': periods[hour] } });

    document.querySelectorAll('.plant-link').forEach((link) => {
      link.addEventListener('click', () => {
        const label = link.querySelector('.plant-label')?.textContent?.trim();
        if (label) plausible?.('Plant Click', { props: { project: label } });
      });
    });

    document.querySelectorAll('.mobile-project-card').forEach((card) => {
      card.addEventListener('click', () => {
        const label = card.querySelector('div > div:first-child')?.textContent?.trim();
        if (label) plausible?.('Plant Click', { props: { project: label, source: 'mobile-card' } });
      });
    });

    document.querySelectorAll('.bio-social-link').forEach((link) => {
      link.addEventListener('click', () => {
        const label = (link as HTMLAnchorElement).getAttribute('aria-label') || 'unknown';
        plausible?.('Social Click', { props: { platform: label } });
      });
    });
  </script>
</Layout>
